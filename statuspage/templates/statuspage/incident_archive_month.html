{% extends "statuspage/base.html" %}

{% load humanize %}
{% load statuspage_extras %}

{% block content %}
<div class="container">
    <h2>Incidents reported in {{ month|date:"F Y" }}.</h2>
    {% for incident in object_list %}
    {% ifchanged incident.occurred.date %}
    <h3>{{ incident.occurred|date:"DATE_FORMAT" }}</h3>
    {% endifchanged %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <span class="label label-{{ incident.status|incident_status_class:"" }}">{{ incident.get_status_display }}</span>
            {% if incident.service %}
            <span class="label label-default">{{ incident.service.name }}</span>
            {% endif %}
            <strong>{{ incident.name }}</strong>
            <br/><small class="timeinfo" title="{{ incident.occurred|date:"r" }}">occurred {{ incident.occurred|naturaltime }}</small>
        </div>
        <div class="panel-body">
            {{ incident.description }}
        </div>
        <div class="panel-footer">
            <small class="timeinfo" title="{{ incident.modified|date:"r" }}">last update {{ incident.modified|naturaltime }}</small>
        </div>
    </div>
    {% endfor %}
    <nav>
        <ul class="pager">
            {% if previous_month %}
            <li class="previous">
                <a href="{% url "statuspage:incident:archive-month" previous_month.year previous_month.month %}">
                    <span aria-hidden="true">&larr;</span>
                    {{ previous_month|date:"F Y" }}
                </a>
            </li>
            {% endif %}
            {% if next_month %}
            <li class="next">
                <a href="{% url "statuspage:incident:archive-month" next_month.year next_month.month %}">
                    {{ next_month|date:"F Y" }}
                    <span aria-hidden="true">&rarr;</span>
                </a>
            </li>
            {% endif %}
        </ul>
    </nav>
    <p>
</div>
{% endblock %}
